(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},102:function(e,t,n){},103:function(e,t,n){},104:function(e,t,n){},105:function(e,t,n){},106:function(e,t,n){},127:function(e,t,n){},128:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(26),c=n.n(o),i=n(7);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=n(25),s=n(46),u=n(17),d=n(47),m="UPDATE_ACCOUNT",p="UPDATE_VALIDATORS",f="UPDATE_DELEGATIONS",v="UPDATE_POOL",g="UPDATE_VALIDATOR_REWARDS",h="UPDATE_ATOM_PRICE",b={account:{},validators:[],delegations:[],pool:{not_bonded_tokens:0,bonded_tokens:0},validatorRewards:{},price:{}};function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;return Object(d.a)(e,function(e){switch(t.type){case m:var n=t.payload.account;return void(n&&"object"===typeof n&&(e.account=Object(u.a)({},e.account,t.payload.account)));case p:return void(e.validators=t.payload.validators);case f:return void(e.delegations=t.payload.delegations);case v:return void(e.pool=t.payload.pool);case g:return void(e.validatorRewards=t.payload.validatorRewards);case h:return void(e.price=t.payload.price);default:return e}})}var y=function(e){return function(t){return function(n){console.group(n.type),console.info("dispatching",n);var a=t(n);return console.log("next state",e.getState()),console.groupEnd(),a}}};var O=n(2),k=n(3),j=n(5),_=n(4),A=n(6),w=n(36),N=n(1),D={available_asset:"\u53ef\u7528\u4f59\u989d",earnings:"\u6536\u76ca",delegation:"\u59d4\u6258",unstaking:"\u8d4e\u56de\u4e2d",my_delegation:"\u6211\u7684\u59d4\u6258",delegated:"\u5df2\u59d4\u6258",validators:"\u9a8c\u8bc1\u8282\u70b9",annualized_earnings:"\u9884\u8ba1\u5e74\u5316\u6536\u76ca",anticipated_earnings:"\u9884\u8ba1\u6536\u76ca(\u5929)",unstake:"\u8d4e\u56de",delegate:"\u59d4\u6258",accessing_account:"\u83b7\u53d6\u8d26\u53f7\u4e2d...",commission:"\u4f63\u91d1",total_delegation:"\u603b\u59d4\u6258",validator_delegation:"\u9a8c\u8bc1\u8005\u59d4\u6258",staked:"\u5df2\u62b5\u62bc",failed_to_send:"\u53d1\u9001\u5931\u8d25",sent_successfully:"\u53d1\u9001\u6210\u529f",without_delegation_couldnt_unstake:"\ud83e\udd2a \u4f60\u5728\u6b64\u9a8c\u8bc1\u8005\u4e0b\u6ca1\u6709\u62b5\u62bc\uff0c\u65e0\u6cd5\u8d4e\u56de",cancel_delegate:"\u53d6\u6d88\u59d4\u6258",input_amount:"\u8f93\u5165\u91d1\u989d",proposal_vote:"\u63d0\u6848\u6295\u7968",coming_soon:"\u5373\u5c06\u4e0a\u7ebf"},C={available_asset:"Available Asset",earnings:"Earnings",delegation:"Delegation",unstaking:"Unstaking",my_delegation:"My Delegation",delegated:"Delegated",validators:"Validators",annualized_earnings:"Annualized Returns",anticipated_earnings:"Anticipated Returns(day)",unstake:"Unstake",delegate:"Delegate",accessing_account:"Accessing Account...",commission:"Commission Rate",total_delegation:"Total Delegation",validator_delegation:"Validator Delegation",staked:"Staked",failed_to_send:"Failed",sent_successfully:"Successfully",without_delegation_couldnt_unstake:"\ud83e\udd2a You don't have any delegation in the validator, couldn't unstake",cancel_delegate:"Cancel Delegate",input_amount:"Input Amount",proposal_vote:"Proposal Vote",coming_soon:"Coming Soon"},M=n(50),T=n.n(M),I=n(51),P=n.n(I),z=n(23),R=n.n(z),S=n(52),x=n.n(S),V=n(53),B={dev:{denom:"muon",chainAPI:"https://api.dev.tokenlon.im/v1/cosmos",market:"https://dexapi.dev.tokenlon.im/rpc"},prod:{denom:"uatom",chainAPI:"https://api.tokenlon.im/v1/cosmos",market:"https://mainnet-dexapi.token.im/rpc"}},U=function(){var e=-1!==window.location.host.indexOf(".dev.");return B[e?"dev":"prod"]},F=function(){return{transfer:{amount:[{amount:"5000",denom:U().denom}],gas:"200000"},retainFee:.01}},J=n.n(V).a;function L(e,t,n){return{from:e,chainType:"COSMOS",fee:F().transfer,msg:t,memo:n}}function X(e,t,n,a){return{type:"cosmos-sdk/MsgDelegate",value:{delegator_address:e,validator_address:t,amount:{amount:n,denom:a}}}}function Y(e,t,n,a){return{type:"cosmos-sdk/MsgUndelegate",value:{delegator_address:e,validator_address:t,amount:{amount:n,denom:a}}}}R.a.DP=20,R.a.RM=0;var G=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return e&&e.length>t?"".concat(e.substring(0,t/2),"...").concat(e.substring(e.length-t/2,e.length)):e},K=function(e){return new R.a(e)},q=function(e){return new R.a(e,10).times(1e6).toString()},W=function(e){return new R.a(e).div(1e6).toString()},Z=function(e){return x()(e).format("0,0.[0000]")},H=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return isNaN(Number(e))?"~":"".concat((100*e).toFixed(t),"%")},Q=function(e){return"undefined"!==typeof e},$=function(e){var t=e;return t&&t.coins&&Array.isArray(t.coins)&&t.coins.find(function(e){return"uatom"===e.denom||"muon"===e.denom}).amount||0},ee=function(e){var t=0;return e.forEach(function(e){t+=1*e.shares}),t.toFixed(0)},te=function(e){var t=0;return e.forEach(function(e){t+=1*e.amount}),t.toFixed(0)},ne=function(e){var t=0;return e.forEach(function(e){Array.isArray(e.entries)&&e.entries.forEach(function(e){t+=1*e.balance})}),t.toFixed(0)},ae=function(){return(navigator.language||"").toLowerCase().split(/[^\w+]/gi)[0]||"zh"};Object(N.c)([].concat(Object(w.a)(T.a),Object(w.a)(P.a)));var re=function(e){function t(){return Object(O.a)(this,t),Object(j.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this.props.children,t=ae(),n=function(e){switch(e){case"en":return C;case"zh":default:return D}}(t);return r.a.createElement(N.b,{key:t,locale:t,messages:n},e)}}]),t}(a.Component);var oe=Object(i.b)(function(e){return{}})(re),ce=n(9),ie=n(19),le=function(e){return e.account},se=function(e){return e.validators},ue=function(e){return e.delegations},de=function(e){return e.pool},me=function(e){return e.validatorRewards},pe=function(e){return e.price},fe=(n(84),n(85),function(e){function t(){return Object(O.a)(this,t),Object(j.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.index;return r.a.createElement("div",{className:"navbar"},r.a.createElement("div",null,r.a.createElement(ce.b,{className:0===e?"selected":"",to:"/"},r.a.createElement(N.a,{id:"my_delegation"})),r.a.createElement(ce.b,{className:1===e?"selected":"",to:"/validators"},r.a.createElement(N.a,{id:"validators"}))))}}]),t}(a.Component)),ve=(n(91),function(e){function t(){return Object(O.a)(this,t),Object(j.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.account,n=e.price,a=void 0===n?{}:n,o=t.address,c=t.balance,i=t.rewardBalance,l=t.refundingBalance,s=t.delegateBalance,u=a.price||0,d="CNY"===a.currency?"\xa5":"$";return r.a.createElement("div",{className:"account-card"},r.a.createElement("div",{className:"account-top"},r.a.createElement("div",{className:"account-top-address"},r.a.createElement("strong",null,"Cosmos Wallet"),o?r.a.createElement("span",null,G(o,24)):r.a.createElement(N.a,{id:"accessing_account"})),r.a.createElement("div",{className:"account-top-amount"},r.a.createElement("strong",null,Q(c)?"".concat(Z(W(c))," ATOM"):"~"),r.a.createElement("span",null,d," ",Q(c)?Z(K(W(c)).times(u).toString()):"~"))),r.a.createElement("div",{className:"account-bottom"},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(N.a,{id:"available_asset"}),r.a.createElement("i",null,Q(c)?Z(W(c)):"~")),r.a.createElement("div",null,r.a.createElement(N.a,{id:"earnings"}),r.a.createElement("i",null,Q(i)?Z(W(i)):"~"))),r.a.createElement("div",{className:"split-line"}),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(N.a,{id:"delegation"}),r.a.createElement("i",null,Q(s)?Z(W(s)):"~")),r.a.createElement("div",null,r.a.createElement(N.a,{id:"unstaking"}),r.a.createElement("i",null,Q(l)?Z(W(l)):"~")))))}}]),t}(a.Component)),ge=Object(i.b)(function(e){return{account:le(e),price:pe(e)}},{})(Object(N.d)(ve)),he=(n(92),function(e){function t(){return Object(O.a)(this,t),Object(j.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.url;return r.a.createElement("div",{className:"logo"},r.a.createElement("img",{alt:"logo",src:e||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNs75j+HwAF6wKnIaCjVwAAAABJRU5ErkJggg==",title:"logo"}))}}]),t}(a.Component)),be=(n(93),function(){return r.a.createElement("div",{className:"loading-wrap"},r.a.createElement("div",{className:"lds-ring"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))}),Ee=(n(94),function(e){function t(){return Object(O.a)(this,t),Object(j.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){}},{key:"renderItem",value:function(e,t,n){if(!t)return null;var a=this.props.validatorRewards[t.operator_address]||0;return r.a.createElement(ce.b,{className:"dl-card",key:n,to:"/validator/".concat(t.operator_address)},r.a.createElement("div",{className:"top"},r.a.createElement(he,{url:t.description.logo}),r.a.createElement("strong",null,t.description.moniker),r.a.createElement("div",null,r.a.createElement("i",null,H(t.annualized_returns,3)||"~"),r.a.createElement(N.a,{id:"annualized_earnings"}))),r.a.createElement("div",{className:"split-line"}),r.a.createElement("div",{className:"bottom"},r.a.createElement("div",null,r.a.createElement(N.a,{id:"delegated"}),r.a.createElement("i",null,Z(W(e.shares)))),r.a.createElement("div",null,r.a.createElement(N.a,{id:"earnings"}),r.a.createElement("i",null,a?Z(W(a)):"~")),r.a.createElement("div",null,r.a.createElement(N.a,{id:"anticipated_earnings"}),r.a.createElement("i",null,e.shares&&t.annualized_returns?"+".concat(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return e&&0!==Number(e)?K(e).toFixed(t,1):"0"}(W(e.shares*t.annualized_returns/365))):"~"))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.delegations,a=t.validators;return n&&n.length?r.a.createElement("div",{className:"delegations"},!!n&&n.map(function(t,n){var r=a.find(function(e){return e.operator_address===t.validator_address});return e.renderItem(t,r,n)})):r.a.createElement(be,null)}}]),t}(a.Component)),ye=Object(i.b)(function(e){return{validators:se(e),delegations:ue(e),validatorRewards:me(e)}},{})(Ee),Oe=(n(95),[{name:"hash",operator_address:"cosmosvaloper1cgh5ksjwy2sd407lyre4l3uj2fdrqhpkzp06e6",imgs:{zh_big:"https://aws-v2-cdn.token.im/cosmos/collaborators/hash-zh-big.png",zh_small:"https://aws-v2-cdn.token.im/cosmos/collaborators/hash-zh-small.png",en_big:"https://aws-v2-cdn.token.im/cosmos/collaborators/hash-en-big.png",en_small:"https://aws-v2-cdn.token.im/cosmos/collaborators/hash-en-small.png"}},{name:"SparkPool",operator_address:"cosmosvaloper1rwh0cxa72d3yle3r4l8gd7vyphrmjy2kpe4x72",imgs:{zh_big:"https://aws-v2-cdn.token.im/cosmos/collaborators/sparkpool-zh-big.png",zh_small:"https://aws-v2-cdn.token.im/cosmos/collaborators/sparkpool-zh-small.png",en_big:"https://aws-v2-cdn.token.im/cosmos/collaborators/sparkpool-en-big.png",en_small:"https://aws-v2-cdn.token.im/cosmos/collaborators/sparkpool-en-small.png"}}]),ke=null,je=null;var _e=function(e){function t(e){var n;return Object(O.a)(this,t),(n=Object(j.a)(this,Object(_.a)(t).call(this,e))).state=function(e){var t=ae();console.log(e);var n=Date.now()%2;ke=ke||Oe[n],je=je||Oe[Math.abs(n-1)];var a="big"===e?ke:je;return console.log(a,ke,je),console.log(t,e),{url:a.imgs["".concat(t,"_").concat(e)],address:a.operator_address}}(e.size),console.log(n.state),n}return Object(A.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.address,n=e.url;return r.a.createElement(ce.b,{className:"banner",to:"/validator/".concat(t)},r.a.createElement("div",null,r.a.createElement("img",{src:n,alt:"staking"})))}}]),t}(a.Component),Ae=(n(96),function(){return r.a.createElement("div",{className:"water-mark"})}),we=function(){return window.mixpanel||{track_links:function(){return console.warn("track_links")},track:function(){return console.warn("track")}}},Ne=function(e){function t(){return Object(O.a)(this,t),Object(j.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){we().track("to_home")}},{key:"render",value:function(){return r.a.createElement("div",{className:"home",id:"home"},r.a.createElement(Ae,null),r.a.createElement(fe,{index:0}),r.a.createElement(ge,null),r.a.createElement(ye,null),r.a.createElement(_e,{size:"big"}))}}]),t}(a.Component),De=Object(ie.e)(Object(i.b)(function(e){return{}},{})(Object(N.d)(Ne))),Ce=(n(97),function(e){function t(){return Object(O.a)(this,t),Object(j.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.pool,n=e.validator,a=W(n.tokens),o=t.bonded_tokens,c=a/W(o);return r.a.createElement(ce.b,{className:"validator",to:"/validator/".concat(n.operator_address)},r.a.createElement(he,{url:n.description.logo}),r.a.createElement("div",{className:"v-left"},r.a.createElement("strong",null,n.description.moniker),r.a.createElement("span",null,Z(a)," (",H(c,3),")")),r.a.createElement("div",{className:"v-right"},r.a.createElement("strong",null,H(n.annualized_returns,3)),r.a.createElement(N.a,{id:"annualized_earnings"})))}}]),t}(a.Component)),Me=Object(i.b)(function(e){return{}},{})(Ce),Te=(n(98),function(e){function t(){return Object(O.a)(this,t),Object(j.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.validators,n=e.pool;return t&&t.length?r.a.createElement("div",{className:"validator-list"},t.map(function(e){return r.a.createElement(Me,{validator:e,key:e.operator_address,pool:n})})):r.a.createElement(be,null)}}]),t}(a.Component)),Ie=Object(ie.e)(Object(i.b)(function(e){return{validators:se(e),pool:de(e)}})(Te)),Pe=(n(99),function(e){function t(){return Object(O.a)(this,t),Object(j.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){we().track("to_validators_list")}},{key:"render",value:function(){return r.a.createElement("div",{className:"validators"},r.a.createElement(Ae,null),r.a.createElement(fe,{index:1}),r.a.createElement(_e,{size:"small"}),r.a.createElement(Ie,null))}}]),t}(a.Component)),ze=Object(ie.e)(Object(i.b)(function(e){return{}})(Pe)),Re=(n(100),function(e){function t(){return Object(O.a)(this,t),Object(j.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;we().track("to_validator_detail",{validator:e})}},{key:"render",value:function(){var e=this.props,t=e.validators,n=e.match.params.id,a=t.find(function(e){return e.operator_address===n});return a?r.a.createElement("div",{className:"validator-detail"},r.a.createElement("section",null,r.a.createElement("a",{className:"top",href:a.description.website||"javascript:void(0)"},r.a.createElement(he,{url:a.description.logo}),r.a.createElement("div",{className:"left"},r.a.createElement("strong",null,a.description.moniker),r.a.createElement("span",null,G(a.operator_address,24)))),r.a.createElement("div",{className:"desc"},a.description.details||"no description")),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(N.a,{id:"total_delegation"}),r.a.createElement("i",null,Z(W(a.tokens))," ATOM")),r.a.createElement("li",null,r.a.createElement(N.a,{id:"validator_delegation"}),r.a.createElement("i",null,Z(W(a.delegator_shares))," ATOM")),r.a.createElement("li",null,r.a.createElement(N.a,{id:"commission"}),r.a.createElement("i",null,H(a.commission.rate,1))),r.a.createElement("li",null,r.a.createElement(N.a,{id:"annualized_earnings"}),r.a.createElement("i",null,H(a.annualized_returns,3)))),r.a.createElement("div",{className:"toolbar",style:{bottom:!("undefined"===typeof window||!window)&&/iphone/gi.test(window.navigator.userAgent)&&window.screen.height>=812?40:0}},r.a.createElement(ce.b,{to:"/undelegate/".concat(a.operator_address)},r.a.createElement(N.a,{id:"unstake"})),r.a.createElement(ce.b,{to:"/delegate/".concat(a.operator_address)},r.a.createElement(N.a,{id:"delegate"})))):r.a.createElement(be,null)}}]),t}(a.Component)),Se=Object(ie.e)(Object(i.b)(function(e){return{validators:se(e)}})(Re)),xe=n(28);n(101);window.imToken=window.imToken||{callPromisifyAPI:function(e,t){switch(e){case"cosmos.getAccounts":return Promise.resolve(["cosmos18ptg027t5cumqzkhpn726uhdqdadh88ss7ytv3"]);case"cosmos.getProvider":return Promise.resolve("https://cosmosapi-mainnet.tokenlon.im");case"private.getHeaders":return Promise.resolve('{"Authorization":"Token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJkZXZpY2VUb2tlbiI6IkVBQjZBRTJELThFNEYtNEFDMS1CODM4LTA5MkQwMzE2NjlGQSIsImp0aSI6ImltMTR4NUxZck11Q1lxaXdTRzVBeFhaOXlGRDlIdml2VmJKdDVMRiJ9.rkJ2jziqRKwHvUKX2xkrkA2CDppGegElgVuZ2syHf5Y","X-IDENTIFIER":"im14x5LYrMuCYqiwSG5AxXZ9yFD9HvivVbJt5LF","X-CLIENT-VERSION":"ios:2.3.1.515:14","X-DEVICE-TOKEN":"EAB6AE2D-8E4F-4AC1-B838-092D031669FA","X-LOCALE":"en-US","X-CURRENCY":"CNY","X-DEVICE-LOCALE":"en","X-APP-ID":"im.token.app","X-API-KEY":"3bdc0a49ba634a8e8f3333f8e66e0b84","Content-Type":"application/json"}');default:return Promise.reject(new Error("\u5f53\u524d\u4e0d\u662f imToken \u73af\u5883"))}}};var Ve=window.imToken;function Be(e){return Ve.callPromisifyAPI("cosmos.sendTransaction",e)}var Ue=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=Number(e);if(isNaN(a))return[!1,"\u91d1\u989d\u4e0d\u5408\u6cd5"];if(a<=0)return[!1,"\u8bf7\u8f93\u5165\u5927\u4e8e 0 \u7684\u91d1\u989d"];var r=K(a);return r.plus(n).gt(t)?r.lt(t)?[!1,"\u77ff\u5de5\u8d39\u4e0d\u591f"]:[!1,"\u8d85\u51fa\u53ef\u7528\u6570\u91cf"]:[!0,null]},Fe=n(55),Je=new(n.n(Fe).a),Le=function(e){function t(){var e,n;Object(O.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(j.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(r)))).state={amount:""},n.onSubmit=function(){var e=n.props,t=e.account,a=e.validator,r=e.history,o=e.intl,c=t.balance,i=t.address,l=n.state.amount,s=Ue(l,W(c),F().retainFee),u=Object(xe.a)(s,2),d=u[0],m=u[1];if(!d)return J.error(m);we().track("submit_delegate"),Be(L(i,[X(i,a.operator_address,q(l),U().denom)],"delegate from imToken")).then(function(e){J.success(e,{heading:o.formatMessage({id:"sent_successfully"})}),we().track("submit_delegate",{result:"successful"}),console.log(e),r.push("/"),Je.emit("updateAsyncData")}).catch(function(e){we().track("submit_delegate",{result:"failed",message:e.message}),J.error(e.message,{heading:o.formatMessage({id:"failed_to_send"})})})},n.onChange=function(e){n.setState({amount:e.target.value})},n}return Object(A.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){}},{key:"afterOpenModal",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.account,n=e.intl,a=t.balance,o=this.state.amount,c=Q(a)?Z(W(a)):0,i=!o;return r.a.createElement("div",{className:"form-inner"},r.a.createElement("div",{className:"form-header"},r.a.createElement(N.a,{id:"available_asset"}),r.a.createElement("i",null,c," ATOM")),r.a.createElement("input",{type:"number",placeholder:n.formatMessage({id:"input_amount"}),value:o,onChange:this.onChange,max:c,min:1e-6}),r.a.createElement("button",{disabled:i,className:"form-button",onClick:this.onSubmit},r.a.createElement(N.a,{id:"delegate"})))}}]),t}(a.Component),Xe=Object(N.d)(Le),Ye=(n(102),function(e){function t(){return Object(O.a)(this,t),Object(j.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props)}},{key:"render",value:function(){var e=this.props,t=e.validators,n=e.account,a=e.match,o=e.history,c=a.params.id,i=t.find(function(e){return e.operator_address===c});return console.log(i,a),i?r.a.createElement("div",{className:"delegate-page"},r.a.createElement("div",{className:"validator-detail"},r.a.createElement("section",null,r.a.createElement("div",{className:"top"},r.a.createElement(he,{url:i.description.logo}),r.a.createElement("div",{className:"left"},r.a.createElement("strong",null,i.description.moniker),r.a.createElement("span",null,G(i.operator_address,24)))))),r.a.createElement(Xe,{account:n,validator:i,history:o})):r.a.createElement(be,null)}}]),t}(a.Component)),Ge=Object(ie.e)(Object(i.b)(function(e){return{validators:se(e),account:le(e)}})(Ye)),Ke=(n(103),function(e){function t(e){var n;return Object(O.a)(this,t),(n=Object(j.a)(this,Object(_.a)(t).call(this,e))).onSubmit=function(){var e=n.props,t=e.account,a=e.delegation,r=e.history,o=e.intl,c=a.shares,i=t.address,l=n.state.amount,s=Ue(l,W(c)),u=Object(xe.a)(s,2),d=u[0],m=u[1];if(!d)return J.error(m);we().track("submit_undelegate"),Be(L(i,[Y(i,a.validator_address,q(l),U().denom)],"undelegate from imToken")).then(function(e){J.success(e,{heading:o.formatMessage({id:"sent_successfully"})}),we().track("submit_undelegate",{result:"successful"}),console.log(e),r.push("/"),Je.emit("updateAsyncData")}).catch(function(e){we().track("submit_undelegate",{result:"failed",message:e.message}),J.error(e.message,{heading:o.formatMessage({id:"failed_to_send"})})})},n.onChange=function(e){n.setState({amount:e.target.value})},n.state={amount:""},n}return Object(A.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){}},{key:"renderEmpty",value:function(){return r.a.createElement("div",{className:"form-inner"},r.a.createElement("div",{className:"form-empty"},r.a.createElement(N.a,{id:"without_delegation_couldnt_unstake"})))}},{key:"render",value:function(){var e=this.props,t=e.delegation,n=e.intl;if(!t)return this.renderEmpty();var a=t.shares,o=this.state.amount,c=Q(a)?Z(W(a)):0,i=!o;return r.a.createElement("div",{className:"form-inner"},r.a.createElement("div",{className:"form-header"},r.a.createElement(N.a,{id:"staked"}),r.a.createElement("i",null,c," ATOM")),r.a.createElement("input",{type:"number",placeholder:n.formatMessage({id:"input_amount"}),value:o,onChange:this.onChange,max:c,min:1e-6}),r.a.createElement("button",{disabled:i,className:"form-button",onClick:this.onSubmit},r.a.createElement(N.a,{id:"cancel_delegate"})))}}]),t}(a.Component)),qe=Object(N.d)(Ke),We=(n(104),function(e){function t(){return Object(O.a)(this,t),Object(j.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.validators,n=e.account,a=e.delegations,o=e.match,c=e.history,i=o.params.id,l=t.find(function(e){return e.operator_address===i});if(!l)return r.a.createElement(be,null);var s=a.find(function(e){return e.validator_address===l.operator_address});return console.log(l,o),r.a.createElement("div",{className:"delegate-page"},r.a.createElement("div",{className:"validator-detail"},r.a.createElement("section",null,r.a.createElement("div",{className:"top"},r.a.createElement(he,{url:l.description.logo}),r.a.createElement("div",{className:"left"},r.a.createElement("strong",null,l.description.moniker),r.a.createElement("span",null,G(l.operator_address,24)))))),r.a.createElement(qe,{account:n,delegation:s,validator:l,history:c}))}}]),t}(a.Component)),Ze=Object(ie.e)(Object(i.b)(function(e){return{validators:se(e),delegations:ue(e),account:le(e)}})(We)),He=(n(105),function(e){function t(){return Object(O.a)(this,t),Object(j.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{className:"vote-page"},r.a.createElement(Ae,null),r.a.createElement("div",{className:"cs-img"},r.a.createElement("div",{className:"coming-soon"},r.a.createElement(N.a,{id:"proposal_vote"}),r.a.createElement(N.a,{id:"coming_soon"}))),r.a.createElement("div",{className:"bottom"}))}}]),t}(a.Component)),Qe=Object(ie.e)(Object(i.b)(function(e){return{}})(He)),$e=(n(106),n(21)),et=n.n($e),tt=n(56),nt=n(29),at=n(35),rt=n.n(at),ot=null,ct=function(e){return console.warn(e)};function it(){return lt.apply(this,arguments)}function lt(){return(lt=Object(nt.a)(et.a.mark(function e(){return et.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=ot,e.t0){e.next=5;break}return e.next=4,Ve.callPromisifyAPI("cosmos.getProvider");case 4:e.t0=e.sent;case 5:return e.t1=e.t0,e.abrupt("return",{provider:e.t1});case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function st(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return it().then(function(n){var a=n.provider,r="".concat(a,"/").concat(e);return rt()({method:"get",url:r,params:t}).then(function(n){if(n.data)return n.data;throw new Error("null response ".concat(e," ").concat(JSON.stringify(t)))}).catch(ct)})}function ut(e,t,n){return it().then(function(a){Object(tt.a)(a);var r={jsonrpc:"2.0",id:1,method:t,params:n};return rt()({method:"post",url:e,data:r}).then(function(t){if(t.data)return t.data.result;throw new Error("null response ".concat(e," ").concat(JSON.stringify(n)))})})}function dt(e,t){return 1*e.tokens>1*t.tokens?-1:1}var mt=function(e){return st("staking/delegators/".concat(e,"/delegations"),{}).then(function(e){return e||[]})},pt=function(e){return st("distribution/delegators/".concat(e,"/rewards"),{}).then(function(e){return e||[]})},ft=function(e){return st("staking/delegators/".concat(e,"/unbonding_delegations"),{}).then(function(e){return e||[]})},vt=function(){return st("staking/pool",{}).then(function(e){return e||{}})},gt=function(e,t){return st("distribution/delegators/".concat(e,"/rewards/").concat(t),{}).then(function(e){return te(e=e||[])})};function ht(){return(ht=Object(nt.a)(et.a.mark(function e(){var t;return et.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=U().chainAPI,e.abrupt("return",ut(t,"wallet.getValidators",[]).then(function(e){return(e||[]).map(function(e){return Object(u.a)({},e,{tokens:e.Tokens||e.tokens})})}).then(function(e){return e.sort(dt)}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function bt(){return(bt=Object(nt.a)(et.a.mark(function e(){var t,n,a;return et.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=U().market,n="zh"===ae()?"CNY":"USDT",a=[{chainType:"COSMOS",address:"uatom",currency:n}],e.abrupt("return",ut(t,"market.getPrices",a).then(function(e){return e[0]}).catch(ct));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Et=function(e){function t(){var e,n;Object(O.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(j.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(r)))).updateAsyncData=function(){var e=n.props,t=e.updateAccount,a=e.updateDelegations,r=e.updateValidators,o=e.updatePool,c=e.updateValidatorRewards,i=e.updateAtomPrice;Ve.callPromisifyAPI("cosmos.getAccounts").then(function(e){var n=e[0];t({address:n}),pt(n).then(te).then(function(e){t({rewardBalance:e})}),ft(n).then(ne).then(function(e){t({refundingBalance:e})}),function(e){var t={coins:[],sequence:"0",account_number:"0"};return st("auth/accounts/".concat(e),{}).then(function(e){if(!e)throw new Error("no response");var n=e.value||t;if("auth/DelayedVestingAccount"===e.type){if(!n.BaseVestingAccount)return t;delete(n=Object.assign({},n.BaseVestingAccount.BaseAccount,n.BaseVestingAccount)).BaseAccount,delete n.BaseVestingAccount}return n}).catch(function(e){if(e.message.includes("account bytes are empty")||e.message.includes("failed to prove merkle proof"))return t;console.warn(e)})}(n).then(function(e){var n=$(e);t(Object(u.a)({},e,{balance:n}))}),mt(n).then(function(e){var r=ee(e);a(e),t({delegateBalance:r});var o={},i=e.map(function(e){return gt(n,e.validator_address).then(function(t){o[e.validator_address]=t,console.log(o)})});Promise.all(i).then(function(){c(o)})})}),vt().then(function(e){console.log(e),o(e)}),function(){return ht.apply(this,arguments)}().then(r),function(){return bt.apply(this,arguments)}().then(i)},n}return Object(A.a)(t,e),Object(k.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.updateAsyncData(),Je.on("updateAsyncData",function(){e.updateAsyncData(),setTimeout(e.updateAsyncData,3e4)})}},{key:"componentWillUnmount",value:function(){Je.off("updateAsyncData")}},{key:"render",value:function(){return r.a.createElement(ce.a,{basename:"/cosmos"},r.a.createElement(ie.c,null,r.a.createElement(ie.a,{exact:!0,path:"/",component:De}),r.a.createElement(ie.a,{exact:!0,path:"/validators",component:ze}),r.a.createElement(ie.a,{path:"/validator/:id",component:Se}),r.a.createElement(ie.a,{path:"/delegate/:id",component:Ge}),r.a.createElement(ie.a,{path:"/undelegate/:id",component:Ze}),r.a.createElement(ie.a,{path:"/vote",component:Qe})))}}]),t}(a.Component),yt={updateAccount:function(e){return{type:m,payload:{account:e}}},updateDelegations:function(e){return{type:f,payload:{delegations:e}}},updateValidators:function(e){return{type:p,payload:{validators:e}}},updatePool:function(e){return{type:v,payload:{pool:e}}},updateValidatorRewards:function(e){return{type:g,payload:{validatorRewards:e}}},updateAtomPrice:function(e){return{type:h,payload:{price:e}}}},Ot=Object(i.b)(function(e){return{validators:se(e)}},yt)(Et),kt=(n(127),function(e){var t=[y,s.a],n=l.a.apply(void 0,t);return Object(l.c)(E,e,n)}(void 0));c.a.render(r.a.createElement(i.a,{store:kt},r.a.createElement(oe,null,r.a.createElement(Ot,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},48:function(e,t){},57:function(e,t,n){e.exports=n(128)},73:function(e,t){},79:function(e,t){},84:function(e,t,n){},85:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){},97:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){}},[[57,1,2]]]);
//# sourceMappingURL=main.48b5cdd8.chunk.js.map